!function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;try{f.setItem("TEST","1"),f.removeItem("TEST")}catch(o){f=!1}if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.disableSuid=m.options.disableSuid||!1,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.options.html4Mode=m.options.html4Mode||!1,m.options.delayInit=m.options.delayInit||!1,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h="undefined"!=typeof c&&"undefined"!=typeof c.log&&"undefined"!=typeof c.log.apply,i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated=m.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||m.getLocationHref();return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=m.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.getLocationHref=function(a){return a=a||d,a.URL===a.location.href?a.location.href:a.location.href===decodeURIComponent(a.URL)?a.URL:a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash?a.location.href:-1==a.URL.indexOf("#")&&-1!=a.location.href.indexOf("#")?a.location.href:a.URL||a.location.href},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof m.idToState[c]||"undefined"!=typeof m.store.idToState[c];);m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(a.url?a.url:m.getLocationHref()),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&m.options.disableSuid!==!0&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d,e;return e=-1!=a.indexOf("#")?a.split("#")[0]:a,c=/(.*)\&_suid=([0-9]+)$/.exec(e),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),!e&&b&&!m.isTraditionalAnchor(a)&&(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getCurrentIndex=function(){var a=null;return a=m.savedStates.length<1?0:m.savedStates.length-1},m.getHash=function(a){var b,c=m.getLocationHref(a);return b=m.getHashByUrl(c)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=decodeURIComponent(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(m.busy(!0),c=m.extractState(a,!0),c&&!m.emulated.pushState?m.pushState(c.data,c.title,c.url,!1):m.getHash()!==a&&(m.bugs.setHash?(e=m.getPageUrl(),m.pushState(null,null,e+"#"+a,!1)):d.location.hash=a),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.encodeURIComponent(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(m.getLocationHref());return m.isLastSavedState(c)?void 0:(b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m)},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var d,e,f=!1,g=!1;return m.doubleCheckComplete(),d=m.getHash(),d?(e=m.extractState(d||m.getLocationHref(),!0),e?m.replaceState(e.data,e.title,e.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(f=m.Adapter.extractEventData("state",b,c)||!1,g=f?m.getStateById(f):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(m.getLocationHref()),g||(g=m.createStateObject(null,null,m.getLocationHref())),m.expectedStateId=!1,m.isLastSavedState(g)?(m.busy(!1),!1):(m.storeState(g),m.saveState(g),m.setTitle(g),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(m.getLocationHref(),!0))),f&&(m.onUnload=function(){var a,b,c;try{a=k.parse(f.getItem("History.store"))||{}}catch(d){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),c=k.stringify(a);try{f.setItem("History.store",c)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;f.length&&(f.removeItem("History.store"),f.setItem("History.store",c))}},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},(!m.options||!m.options.delayInit)&&m.init()}(window),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b,c){var d="panelSnap",e="plugin_"+d,f={isMouseDown:!1,isSnapping:!1,enabled:!0,scrollInterval:0,scrollOffset:0,init:function(b,d){var e=this;if(e.container=d,e.$container=a(d),e.$eventContainer=e.$container,e.$snapContainer=e.$container,e.$container.is("body")){e.$eventContainer=a(c),e.$snapContainer=a(c.documentElement);var f=navigator.userAgent;~f.indexOf("WebKit")&&(e.$snapContainer=a("body"))}if(e.scrollInterval=e.$container.height(),e.options=a.extend(!0,{},a.fn.panelSnap.options,b),e.bind(),e.options.$menu!==!1&&a(".active",e.options.$menu).length>0)a(".active",e.options.$menu).click();else{var g=e.getPanel(":first");e.activatePanel(g)}return e},bind:function(){var c=this;c.bindProxied(c.$eventContainer,"scrollstop",c.scrollStop),c.bindProxied(c.$eventContainer,"mousewheel",c.mouseWheel),c.bindProxied(c.$eventContainer,"mousedown",c.mouseDown),c.bindProxied(c.$eventContainer,"mouseup",c.mouseUp),c.bindProxied(a(b),"resizestop",c.resize),c.options.keyboardNavigation.enabled&&c.bindProxied(a(b),"keydown",c.keyDown,c.$eventContainer),c.options.$menu!==!1&&c.bindProxied(a(c.options.$menu),"click",c.captureMenuClick,c.options.menuSelector)},bindProxied:function(b,c,d,e){var f=this;e="string"==typeof e?e:null,b.on(c+f.options.namespace,e,a.proxy(function(a){return d.call(f,a)},f))},destroy:function(){var c=this;c.$eventContainer.off(c.options.namespace),a(b).off(c.options.namespace),c.options.$menu!==!1&&a(c.options.menuSelector,c.options.$menu).off(c.options.namespace),c.$container.removeData(e)},scrollStop:function(a){var b=this;if(a.stopPropagation(),b.enabled){if(b.isMouseDown)return void b.$eventContainer.one("mouseup"+b.options.namespace,b.processScroll);if(!b.isSnapping){var c,d=b.$snapContainer.scrollTop(),e=d-b.scrollOffset,f=b.$container[0].scrollHeight-b.scrollInterval,g=b.getPanel().length;c=e<-b.options.directionThreshold&&e>-b.scrollInterval?Math.floor(d/b.scrollInterval):e>b.options.directionThreshold&&e<b.scrollInterval?Math.ceil(d/b.scrollInterval):Math.round(d/b.scrollInterval),c=Math.max(0,Math.min(c,g));var h=b.getPanel(":eq("+c+")");0===e||(0>=d||d>=f?(b.activatePanel(h),b.scrollOffset=0>d?0:f):b.snapToPanel(h))}}},mouseWheel:function(){var a=this;a.$container.stop(!0),a.isSnapping=!1},mouseDown:function(){var a=this;a.isMouseDown=!0},mouseUp:function(a){var b=this;b.isMouseDown=!1,b.scrollOffset!==b.$snapContainer.scrollTop()&&b.scrollStop(a)},keyDown:function(a){var b=this,c=b.options.keyboardNavigation;if(b.isSnapping){if(a.which==c.previousPanelKey||a.which==c.nextPanelKey)return a.preventDefault(),!1}else switch(a.which){case c.previousPanelKey:a.preventDefault(),b.snapTo("prev",c.wrapAround);break;case c.nextPanelKey:a.preventDefault(),b.snapTo("next",c.wrapAround)}},resize:function(){var a=this;if(a.scrollInterval=a.$container.height(),a.enabled){var b=a.getPanel(".active");a.snapToPanel(b)}},captureMenuClick:function(b){var c=this,d=a(b.currentTarget).data("panel"),e=c.getPanel('[data-panel="'+d+'"]');return c.snapToPanel(e),!1},snapToPanel:function(a){var b=this;if(a instanceof jQuery){b.isSnapping=!0,b.options.onSnapStart.call(b,a),b.$container.trigger("panelsnap:start",[a]);var c=0;c=b.$container.is("body")?a.offset().top:b.$snapContainer.scrollTop()+a.position().top,b.$snapContainer.stop(!0).animate({scrollTop:c},b.options.slideSpeed,function(){b.scrollOffset=c,b.isSnapping=!1,b.options.onSnapFinish.call(b,a),b.$container.trigger("panelsnap:finish",[a])}),b.activatePanel(a)}},activatePanel:function(b){var c=this;if(c.getPanel(".active").removeClass("active"),b.addClass("active"),c.options.$menu!==!1){var d="> "+c.options.menuSelector+".active";a(d,c.options.$menu).removeClass("active");var e='[data-panel="'+b.data("panel")+'"]',f="> "+c.options.menuSelector+e,g=a(f,c.options.$menu);g.addClass("active")}c.options.onActivate.call(c,b),c.$container.trigger("panelsnap:activate",[b])},getPanel:function(b){var c=this;"undefined"==typeof b&&(b="");var d="> "+c.options.panelSelector+b;return a(d,c.$container)},snapTo:function(a,b){var c=this;"boolean"!=typeof b&&(b=!0);var d;switch(a){case"prev":d=c.getPanel(".active").prev(c.options.panelSelector),d.length<1&&b&&(d=c.getPanel(":last"));break;case"next":d=c.getPanel(".active").next(c.options.panelSelector),d.length<1&&b&&(d=c.getPanel(":first"));break;case"first":d=c.getPanel(":first");break;case"last":d=c.getPanel(":last")}d.length>0&&c.snapToPanel(d)},enable:function(){var a=this;a.scrollOffset=a.$container[0].scrollHeight,a.enabled=!0},disable:function(){var a=this;a.enabled=!1},toggle:function(){var a=this;a.enabled?a.disable():a.enable()}};a.fn[d]=function(b){var c=Array.prototype.slice.call(arguments);return this.each(function(){var d=a.data(this,e);if("object"!=typeof b&&"init"!==b&&b){if(!d)return void a.error("Plugin is not initialized for this object yet.");if(!d[b])return void a.error("Method "+b+" does not exist on jQuery.panelSnap.");var g=b;b=c.slice(1),d[g].apply(d,b)}else{if(d)return void a.error("Plugin is already initialized for this object.");"init"===b&&(b=c[1]||{}),d=Object.create(f).init(b,this),a.data(this,e,d)}})},a.fn[d].options={$menu:!1,menuSelector:"a",panelSelector:"section",namespace:".panelSnap",onSnapStart:function(){},onSnapFinish:function(){},onActivate:function(){},directionThreshold:50,slideSpeed:200,keyboardNavigation:{enabled:!1,nextPanelKey:40,previousPanelKey:38,wrapAround:!0}}}(jQuery,window,document),function(a){a.event.special.scrollstart={enabled:!0,setup:function(){function b(a,b){a.type=b?"scrollstart":"scrollstop",e.trigger(a)}var c,d=this,e=a(d);e.data("scrollwatch",!0),e.on("touchmove scroll",function(d){a.event.special.scrollstart.enabled&&(a.event.special.scrollstart.scrolling||(a.event.special.scrollstart.scrolling=!0,b(d,!0)),clearTimeout(c),c=setTimeout(function(){a.event.special.scrollstart.scrolling=!1,b(d,!1)},50))})}},a.event.special.scrollstop={setup:function(){var b=this,c=a(b);c.data("scrollwatch")||a(this).on("scrollstart",function(){})}}}(jQuery),function(a){a.event.special.resizestart={enabled:!0,setup:function(){function b(a,b){a.type=b?"resizestart":"resizestop",e.trigger(a)}var c,d=this,e=a(d);e.data("resizewatch",!0),e.on("resize",function(d){a.event.special.resizestart.enabled&&(a.event.special.resizestart.resizing||(a.event.special.resizestart.resizing=!0,b(d,!0)),clearTimeout(c),c=setTimeout(function(){a.event.special.resizestart.resizing=!1,b(d,!1)},200))})}},a.event.special.resizestop={setup:function(){var b=this,c=a(b);c.data("resizewatch")||a(this).on("resizestart",function(){})}}}(jQuery),function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a){function b(a){var b,c;if(a.start||(a.start=h),b=h-a.start,a.delay&&(b-=a.delay),c=b/a.duration,c>1&&(c=1),1>=c&&c>=0){var d=a.delta(c);a.step(d)}1==c&&(a.infinite?(a.delay=0,a.start=h):a.finished=!0)}function c(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)}function d(a,b,c){var d=parseInt(a.slice(1),16),e=parseInt(b.slice(1),16),f=d>>16,g=d>>8&255,h=255&d,i=e>>16,j=e>>8&255,k=255&e;return"#"+(16777216+65536*(Math.round((i-f)*c)+f)+256*(Math.round((j-g)*c)+g)+(Math.round((k-h)*c)+h)).toString(16).slice(1)}function e(a){function b(a){return("0"+parseInt(a).toString(16)).slice(-2)}return/^#[0-9A-F]{6}$/i.test(a)?a:(a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+b(a[1])+b(a[2])+b(a[3]))}var f=!1,g=new Array,h=0,i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){window.setTimeout(function(){animloop()},1e3/60)}}(),j=function(f,g){this.index=g;var i=this;this.init=function(){i.can=f,i.ctx=i.can.getContext("2d"),i.resize(),i.scroll(),i.click(),j.init(),l.init(),m.init()},this.click=function(){a(i.can).click(function(a){j.addCircle(a.offsetX,a.offsetY)})},this.resize=function(){a(window).resize(function(){var b=a("<canvas></canvas>").width(i.can.width).height(i.can.height)[0],c=b.getContext("2d");c.drawImage(i.can,0,0),i.can.width=a(i.can).width(),i.can.height=a(i.can).height(),i.ctx.drawImage(c.canvas,0,0)}).trigger("resize")},this.scroll=function(){a(window).scroll(function(){var b=a(window).scrollTop(),c=b+a(window).height(),d=a(i.can).offset().top,e=d+a(i.can).height();i.visible=d>=b&&c>d||c>=e&&e>b?!0:!1}).trigger("scroll")},this.draw=function(){i.visible&&(j.draw(),l.draw(),m.draw())},this.update=function(){j.update(),l.update(),m.update()},this.land=function(){};var j={circles:[],init:function(){j.color=e(a(i.can).css("background-color")),j.colorOrig=j.color},draw:function(){i.ctx.save(),i.ctx.fillStyle=j.color,i.ctx.fillRect(0,0,i.can.width,i.can.height),i.ctx.restore(),j.circles&&j.circles.forEach(function(a){i.ctx.save(),i.ctx.beginPath(),i.ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!1),i.ctx.fillStyle=a.fill,i.ctx.fill(),i.ctx.restore()})},update:function(){var a=0;j.circles.forEach(function(b){b.radius>i.can.width&&b.radius>i.can.height&&(j.color=b.fill,j.circles.splice(a--,1)),b.radius*=1.05,a++}),j.color=d(j.color,j.colorOrig,.1)},addCircle:function(a,b){var d=c(j.colorOrig,1*Math.random()+-.5);j.circles.push({x:a,y:b,radius:1,fill:d})}},l={particlesArray:[],center:{},init:function(){},draw:function(){for(var a=0;a<l.particlesArray.length;a++)l.particlesArray[a].draw()},update:function(){h%3==0&&l.particlesArray.push(new l.particle);for(var a=0;a<l.particlesArray.length;a++)l.particlesArray[a].update()},particle:function(){this.x=i.can.width/2,this.y=i.can.height/2,this.vx=20*Math.random()-10,this.vy=20*Math.random()-10,this.opacity=.25*Math.random()+.5,this.radius=1.5*Math.random()+1,this.draw=function(){i.ctx.save(),i.ctx.fillStyle="rgba(255,255,255,"+this.opacity+")",i.ctx.beginPath(),i.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),i.ctx.fill(),i.ctx.restore()},this.update=function(){if(this.x=this.x+this.vx,this.y=this.y+this.vy,this.vx=.96*this.vx,this.vy=.96*this.vy,this.opacity=.99*this.opacity,this.opacity<.1||this.x+this.radius>i.can.width||this.x-this.radius<0||this.y+this.radius>i.can.height||this.y-this.radius<0)for(var a in l.particlesArray)l.particlesArray[a]==this&&l.particlesArray.splice(a,1)}}},m={side:150,count:0,rotate:0,opacity:0,scale:0,animations:[{duration:80,delta:function(a){return k.easeOutQuad(a)},step:function(a){m.rotate=600*a*Math.PI/180,m.opacity=a}},{duration:40,delta:function(a){return k.linear(a)},step:function(a){m.scale=a}},{delay:40,duration:75,infinite:!0,delta:function(a){return k.linear(a)},step:function(a){var b=.05,c=Math.cos(Math.PI+Math.PI*a*2);c/=1/b,c=c+1+b,m.scale=c}}],init:function(){},draw:function(){var a,b,c;a=m.side*(Math.sqrt(3)/2),b=[{x:0,y:-a/2},{x:-m.side/2,y:a/2},{x:m.side/2,y:a/2}],c=(b[0].y+b[1].y+b[2].y)/3,b.forEach(function(a){a.y=a.y-c}),i.ctx.save(),i.ctx.fillStyle="rgba(255,255,255,"+m.opacity+")",i.ctx.translate(i.can.width/2,i.can.height/2),i.ctx.rotate(m.rotate),i.ctx.scale(m.scale,m.scale),i.ctx.beginPath(),i.ctx.moveTo(b[0].x,b[0].y),i.ctx.lineTo(b[1].x,b[1].y),i.ctx.lineTo(b[2].x,b[2].y),i.ctx.lineTo(b[0].x,b[0].y),i.ctx.fill(),i.ctx.closePath(),i.ctx.restore()},update:function(){var a=0;m.animations.forEach(function(c){c.finished&&m.animations.splice(a--,1),b(c),a++})}}},k={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},l={init:function(){l.resize(),a(".navigation-menu").click(function(b){b.preventDefault(),a(".navigation").toggleClass("is-open")}),a("section[data-panel]").length&&(a("body").panelSnap({$menu:a(".navigationSide-list, .navigation-list"),menuSelector:"li[data-panel]",onSnapFinish:function(){}}),a(".navigation-button.ajax").click(function(b){b.preventDefault(),a("body").panelSnap("snapToPanel",a("section:first"))}),f=!0),a(".navigationSide-item").hover(function(){a(".navigationSide-list .navigationSide-item:nth-of-type("+(a(this).index()+1)+")").addClass("is-hover")},function(){a(".navigationSide-list .navigationSide-item:nth-of-type("+(a(this).index()+1)+")").removeClass("is-hover")}),a("canvas").each(function(b){g[b]=new j(a(this)[0],b),g[b].init()})},resize:function(){}};a(function(){l.init();var b=function(){h++,a.each(g,function(a){g[a].draw(),g[a].update()}),i(b)};requestAnimationFrame(b),(test=function(){var b=History.getState();a(".ajax").on("click",function(b){b.preventDefault(),alert(9);var c=a(this),d=c.attr("href");a.ajax({url:pagebase+d,dataType:"html",success:function(b){a("body").html(b),history.pushState(null,d,d),f&&(a("body").panelSnap("destroy"),f=!1),l.init(),test()}})}),History.Adapter.bind(window,"statechange",function(){alert(8),b=History.getState(),alert(pagebase+b.title),a.ajax({url:pagebase+b.title,dataType:"html",success:function(b){a("body").html(b),f&&(a("body").panelSnap("destroy"),f=!1),l.init()}})})})()}),a.fn.smarthistory=function(b){return"pushState"in history?(window.addEventListener("popstate",function(a){var c=a.state||{},d=c.data;return d?void b(d):(window.location=location.href,console.log(history),!1)}),this.click(function(c){var d=a(this),e=d.attr("href");return d.hasClass("ajax--home")&&d.parents(".home").length?this:(c.preventDefault(),void a.get(e).done(function(a){b(a),history.pushState({data:a},e,e)}).fail(function(){location.href=e}))})):this}}(jQuery);