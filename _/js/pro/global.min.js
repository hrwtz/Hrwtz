!function(a){function b(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.floor(8*Math.random())];return b}function c(a){var b,c;if(a.start||(a.start=d),b=d-a.start,a.delay&&(b-=a.delay),c=b/a.duration,c>1&&(c=1),1>=c&&c>=0){var e=a.delta(c);a.step(e)}1==c&&(a.infinite?(a.delay=0,a.start=d):a.finished=!0)}var d=0,e=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(){window.setTimeout(f.draw,1e3/60)}}(),f={init:function(){f.can=a("canvas")[0],f.ctx=f.can.getContext("2d"),f.resize(),f.click(),j.init(),i.init(),f.animloop()},click:function(){a(f.can).click(function(a){g.addCircle(a.offsetX,a.offsetY)})},resize:function(){a(window).resize(function(){var b=a("<canvas></canvas>").width(f.can.width).height(f.can.height)[0],c=b.getContext("2d");c.drawImage(f.can,0,0),f.can.width=a(f.can).width(),f.can.height=a(f.can).height(),f.ctx.drawImage(c.canvas,0,0)}).trigger("resize")},draw:function(){g.draw(),j.draw(),i.draw()},animloop:function(){d++,f.draw(),e(f.animloop)}},g={circles:[],color:"black",draw:function(){f.ctx.save(),f.ctx.fillStyle=g.color,f.ctx.fillRect(0,0,f.can.width,f.can.height),f.ctx.restore(),g.circles&&g.circles.forEach(function(a){f.ctx.save(),f.ctx.beginPath(),f.ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!1),f.ctx.fillStyle=a.fill,f.ctx.fill(),f.ctx.restore()}),g.update()},update:function(){var a=0;g.circles.forEach(function(b){b.radius>f.can.width&&b.radius>f.can.height&&(g.color=b.fill,g.circles.splice(a--,1)),b.radius*=1.05,a++})},addCircle:function(a,c){g.circles.push({x:a,y:c,radius:1,fill:b()})}},h={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},i={side:150,count:0,rotate:0,opacity:0,scale:0,animations:[{duration:80,delta:function(a){return h.easeOutQuad(a)},step:function(a){i.rotate=600*a*Math.PI/180,i.opacity=a}},{duration:40,delta:function(a){return h.linear(a)},step:function(a){i.scale=a}},{delay:40,duration:75,infinite:!0,delta:function(a){return h.linear(a)},step:function(a){var b=.05,c=Math.cos(Math.PI+Math.PI*a*2);c/=1/b,c=c+1+b,i.scale=c}}],init:function(){},draw:function(){var a,b,c;a=i.side*(Math.sqrt(3)/2),b=[{x:0,y:-a/2},{x:-i.side/2,y:a/2},{x:i.side/2,y:a/2}],c=(b[0].y+b[1].y+b[2].y)/3,b.forEach(function(a){a.y=a.y-c}),f.ctx.save(),f.ctx.fillStyle="rgba(255,255,255,"+i.opacity+")",f.ctx.translate(f.can.width/2,f.can.height/2),f.ctx.rotate(i.rotate),f.ctx.scale(i.scale,i.scale),f.ctx.beginPath(),f.ctx.moveTo(b[0].x,b[0].y),f.ctx.lineTo(b[1].x,b[1].y),f.ctx.lineTo(b[2].x,b[2].y),f.ctx.lineTo(b[0].x,b[0].y),f.ctx.fill(),f.ctx.closePath(),f.ctx.restore(),i.update()},update:function(){var a=0;i.animations.forEach(function(b){b.finished&&i.animations.splice(a--,1),c(b),a++})}},j={particlesArray:[],center:{},init:function(){},draw:function(){d%3==0&&j.particlesArray.push(new j.particle);for(var a=0;a<j.particlesArray.length;a++)j.particlesArray[a].draw()},particle:function(){this.x=f.can.width/2,this.y=f.can.height/2,this.vx=20*Math.random()-10,this.vy=20*Math.random()-10,this.opacity=.25*Math.random()+.5,this.radius=1.5*Math.random()+1,this.draw=function(){f.ctx.save(),f.ctx.fillStyle="rgba(255,255,255,"+this.opacity+")",f.ctx.beginPath(),f.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),f.ctx.fill(),f.ctx.restore(),this.update()},this.update=function(){if(this.x=this.x+this.vx,this.y=this.y+this.vy,this.vx=.96*this.vx,this.vy=.96*this.vy,this.opacity=.99*this.opacity,this.opacity<.1||this.x+this.radius>f.can.width||this.x-this.radius<0||this.y+this.radius>f.can.height||this.y-this.radius<0)for(var a in j.particlesArray)j.particlesArray[a]==this&&j.particlesArray.splice(a,1)}}};a(function(){f.init()})}(jQuery);