!function(a){var b,c={init:function(){var f;b=new fabric.Canvas("canvas"),f=a("#canvas").parents(".cell"),b.setWidth(f.width()),b.setHeight(f.height()),e.draw(),d.init(),c.animate()},animate:function(){fabric.util.requestAnimFrame(c.animate,b.getElement()),b.renderAll()}},d={init:function(){d.angle=0,d.sideLength=100,d.shape=d.createTriangle(),b.add(d.shape),d.shape.animate("angle",1440,{onChange:b.renderAll.bind(b),duration:1e4})},createTriangle:function(){var a,c,e,f,g,h;return a=d.sideLength,c=a*(Math.sqrt(3)/2),x=b.width/2-a/2,y=b.height/2-c/2,e=[{x:0,y:-c/2},{x:-a/2,y:c/2},{x:a/2,y:c/2}],f=(e[0].y+e[1].y+e[2].y)/3,y-=f,g=fabric.util.rotatePoint(new fabric.Point(x,y),new fabric.Point(x+a/2,y+c/3*2),fabric.util.degreesToRadians(d.angle)),h=new fabric.Triangle({width:100,height:100,selectable:!1,fill:"white",strokeWidth:2,left:b.width/2,top:b.height/2,originX:"center",originY:"center",angle:d.angle})},draw:function(){b.renderAll(),d.angle+=1,b.remove(d.shape),d.shape=d.createTriangle(),b.add(d.shape)}},e={draw:function(){var a=new fabric.Rect({left:0,top:0,fill:"black",width:b.width,height:b.height,selectable:!1});b.add(a)}};c.init()}(jQuery);